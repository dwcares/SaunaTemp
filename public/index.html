<html>
  <head>
    <title>Sauna Temp</title>
    <link rel="shortcut icon" href="favicon.ico">
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=320">
    <style type="text/css">   
       body.offline {
            background-image: url('612sauna.jpg');
            background-size: 265px 265px;
            background-position: center center;
            background-repeat: no-repeat;
       }
       body.offline .gauge {
            opacity: 0;
        } 
        
        .gauge {
            position: absolute;
            top: calc(50% - 100px);
            left: calc(50% - 100px);
        }
       
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="jquery.knob.min.js"></script>
    <script src="socket.io-1.2.0.js"></script>
  </head>

  <body class="offline">      
    <div class="gauge" style="text-align:center">
        <input type="text" 
        	   class="dial" 
               value="0"
        	   data-min="0" 
        	   data-max="240" 
        	   data-fgColor="#B20405" 
        	   data-angleOffset=270 
        	   data-angleArc=180 
        	   data-width=200 
        	   data-height=200
			   data-thickness=.3
               data-readonly=true
			   rotation="anticlockwise"/>
    </div>
    <script>
      
       $(".dial").knob({
           format: function(val) {
               return val + "Â°F";
           }
       });
       
      var socket = io();
      socket.on('tempf', function (msg) {
         $('.dial').val(msg).trigger('change');
         $('body').removeClass('offline');
      });
      
      socket.on('devicestatus', function (msg) {
         if (msg === "offline") {
            $('body').addClass('offline'); 
         }
      });
      
    </script>
  </body>
</html>